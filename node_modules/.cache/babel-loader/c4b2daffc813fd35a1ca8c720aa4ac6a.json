{"ast":null,"code":"import _slicedToArray from\"C:/Users/pdcth/Desktop/Tutor-Hepler-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import firebase from\"firebase\";import{useEffect,useState}from\"react\";import StyledFirebaseAuth from\"react-firebaseui/StyledFirebaseAuth\";import{BrowserRouter,Route}from\"react-router-dom\";import Layout from\"./components/layout/Layout\";import axiosClient from\"./api/axiosClient\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";axios.interceptors.request.use(function(config){config.headers.authorization=\"Bearer \".concat(localStorage.getItem(\"jwtToken\"));return config;},function(error){return Promise.reject(error);});// Configure Firebase.\nvar config={apiKey:\"AIzaSyDefd9qBWYVGTqBlmDoyJHVu9hmlJufT68\",authDomain:\"tutor-helper-6faa2.firebaseapp.com\",projectId:\"tutor-helper-6faa2\",storageBucket:\"tutor-helper-6faa2.appspot.com\",messagingSenderId:\"1083830889210\",appId:\"1:1083830889210:web:2f65739bdbdf07c35b3743\",measurementId:\"G-WLNV3EQDWD\"};if(!firebase.apps.length){firebase.initializeApp(config);}var uiConfig={// Popup signin flow rather than redirect flow.\nsignInFlow:\"popup\",// Redirect to /signedIn after sign in is successful. Alternatively you can provide a callbacks.signInSuccess function.\nsignInSuccessUrl:\"/\",// We will display Google and Facebook as auth providers.\nsignInOptions:[firebase.auth.GoogleAuthProvider.PROVIDER_ID]};function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSignedIn=_useState2[0],setIsSignedIn=_useState2[1];// Local signed-in state.\n// Listen to the Firebase Auth state and set the local state.\nuseEffect(function(){var unregisterAuthObserver=firebase.auth().onAuthStateChanged(function(user){var token=firebase.auth().currentUser.getIdToken(true);localStorage.setItem(\"idToken\",user.xa);axios//.post(\"/auth/sign-in-admin\", { apiKey: user.xa})\n.post(\"https://tutorhelper20210920193710.azurewebsites.net/api/v1/auth/sign-in-admin\",{idToken:user.xa}).then(function(response){//localStorage.setItem(\"idToken\", response.data.idToken);\nlocalStorage.setItem(\"jwtToken\",response.data.data.jwtToken);});setIsSignedIn(!!user);});return function(){return unregisterAuthObserver();};// Make sure we un-register Firebase observers when the component unmounts.\n},[]);//   useEffect(() => {\n//     const fetchRequest = () => {\n//       //const response = tutorRequestApi.getAll();\n//       const response = axios.get(\n//         \"​​https://tutorhelper20210920193710.azurewebsites.net/api/v1/tutor-requests\"\n//       );\n//       //setRequest(response.data);\n//       console.log(\"AAAAAAAAA\" + response);\n//     };\n//     fetchRequest();\n//   }, []);\nif(!isSignedIn){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My App\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please sign-in:\"}),/*#__PURE__*/_jsx(StyledFirebaseAuth,{uiConfig:uiConfig,firebaseAuth:firebase.auth()})]});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(Route,{path:\"/\",component:Layout})})});}export default App;","map":{"version":3,"sources":["C:/Users/pdcth/Desktop/Tutor-Hepler-Project/src/App.js"],"names":["firebase","useEffect","useState","StyledFirebaseAuth","BrowserRouter","Route","Layout","axiosClient","axios","interceptors","request","use","config","headers","authorization","localStorage","getItem","error","Promise","reject","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","length","initializeApp","uiConfig","signInFlow","signInSuccessUrl","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","App","isSignedIn","setIsSignedIn","unregisterAuthObserver","onAuthStateChanged","user","token","currentUser","getIdToken","setItem","xa","post","idToken","then","response","data","jwtToken"],"mappings":"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","sourcesContent":["import firebase from \"firebase\";\r\nimport { useEffect, useState } from \"react\";\r\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\r\nimport { BrowserRouter, Route } from \"react-router-dom\";\r\nimport Layout from \"./components/layout/Layout\";\r\nimport axiosClient from \"./api/axiosClient\";\r\nimport axios from \"axios\";\r\n\r\naxios.interceptors.request.use(\r\n  (config) => {\r\n    config.headers.authorization = `Bearer ${localStorage.getItem(\"jwtToken\")}`;\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Configure Firebase.\r\nconst config = {\r\n  apiKey: \"AIzaSyDefd9qBWYVGTqBlmDoyJHVu9hmlJufT68\",\r\n  authDomain: \"tutor-helper-6faa2.firebaseapp.com\",\r\n  projectId: \"tutor-helper-6faa2\",\r\n  storageBucket: \"tutor-helper-6faa2.appspot.com\",\r\n  messagingSenderId: \"1083830889210\",\r\n  appId: \"1:1083830889210:web:2f65739bdbdf07c35b3743\",\r\n  measurementId: \"G-WLNV3EQDWD\",\r\n};\r\nif (!firebase.apps.length) {\r\n  firebase.initializeApp(config);\r\n}\r\n\r\nconst uiConfig = {\r\n  // Popup signin flow rather than redirect flow.\r\n  signInFlow: \"popup\",\r\n  // Redirect to /signedIn after sign in is successful. Alternatively you can provide a callbacks.signInSuccess function.\r\n  signInSuccessUrl: \"/\",\r\n  // We will display Google and Facebook as auth providers.\r\n  signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],\r\n};\r\n\r\nfunction App() {\r\n  const [isSignedIn, setIsSignedIn] = useState(false); // Local signed-in state.\r\n\r\n  // Listen to the Firebase Auth state and set the local state.\r\n  useEffect(() => {\r\n    const unregisterAuthObserver = firebase\r\n      .auth()\r\n      .onAuthStateChanged((user) => {\r\n        const token = firebase.auth().currentUser.getIdToken(true);\r\n        localStorage.setItem(\"idToken\", user.xa);\r\n        axios\r\n          //.post(\"/auth/sign-in-admin\", { apiKey: user.xa})\r\n          .post(\r\n            \"https://tutorhelper20210920193710.azurewebsites.net/api/v1/auth/sign-in-admin\",\r\n            { idToken: user.xa }\r\n          )\r\n          .then((response) => {\r\n            //localStorage.setItem(\"idToken\", response.data.idToken);\r\n            localStorage.setItem(\"jwtToken\", response.data.data.jwtToken);\r\n          });\r\n        setIsSignedIn(!!user);\r\n      });\r\n\r\n    return () => unregisterAuthObserver(); // Make sure we un-register Firebase observers when the component unmounts.\r\n  }, []);\r\n\r\n  //   useEffect(() => {\r\n  //     const fetchRequest = () => {\r\n  //       //const response = tutorRequestApi.getAll();\r\n  //       const response = axios.get(\r\n  //         \"​​https://tutorhelper20210920193710.azurewebsites.net/api/v1/tutor-requests\"\r\n  //       );\r\n  //       //setRequest(response.data);\r\n  //       console.log(\"AAAAAAAAA\" + response);\r\n  //     };\r\n  //     fetchRequest();\r\n  //   }, []);\r\n\r\n  if (!isSignedIn) {\r\n    return (\r\n      <div>\r\n        <h1>My App</h1>\r\n        <p>Please sign-in:</p>\r\n        <StyledFirebaseAuth\r\n          uiConfig={uiConfig}\r\n          firebaseAuth={firebase.auth()}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div>\r\n      <BrowserRouter>\r\n        <Route path=\"/\" component={Layout}></Route>\r\n      </BrowserRouter>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}